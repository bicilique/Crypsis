# .env.example â€” public example and reference
# -----------------------------------------
# This file is intended for public consumption. It documents all environment
# variables used by the project and provides safe example values. DO NOT
# commit real secrets. Copy this file to ".env" and replace placeholders
# with production-safe values (or use a secret manager).

# -----------------------
# Service identification
# -----------------------
# Human-friendly service metadata used in telemetry and logs
SERVICE_NAME=crypsis-backend           # Example: crypsis-backend
SERVICE_VERSION=1.0.0
ENVIRONMENT=development                # development | staging | production

# -----------------------
# Postgres (superuser for init)
# -----------------------
# These credentials are used by initialization scripts that create DBs/users.
# Use a strong password in production and protect this file.
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changeme

# -----------------------
# Application / Test DB
# -----------------------
# Database used by the application (create this DB and user during init)
TEST_DEV_USER=dev_user
TEST_DEV_PASSWORD=dev_pass
TEST_DEV_DB=test_dev

# -----------------------
# Hydra (OAuth2) DB
# -----------------------
# Ory Hydra stores its metadata in a separate database. Configure user/pass/db.
HYDRA_DB_USER=hydra_user
HYDRA_DB_PASSWORD=hydra_pass
HYDRA_DB=hydra_db

# -----------------------
# Hydra HTTP endpoints and secrets
# -----------------------
# The public/admin URLs should point to the service addresses used by other
# containers/services. HYDRA_SYSTEM_SECRET must be a secure random value.
HYDRA_ADMIN_URL=http://hydra:4445         # Hydra admin endpoint (inside compose)
HYDRA_PUBLIC_URL=http://hydra:4444        # Hydra public endpoint
HYDRA_SYSTEM_SECRET=replace-with-strong-secret
HYDRA_CLIENT_ID=example-client-id
HYDRA_CLIENT_NAME=example-client
HYDRA_CLIENT_SECRET=replace-with-client-secret
HYDRA_REDIRECT_URI=http://127.0.0.1:8080/callback

# -----------------------
# Application DB connection
# -----------------------
# These settings are read by the backend to connect to its application DB.
DB_HOST=db
DB_PORT=5432
DB_USER=dev_user
DB_PASSWORD=dev_pass
DB_NAME=test_dev

# -----------------------
# Default admin (first-run convenience)
# -----------------------
# These are example placeholders. In production, create admin accounts using
# a secure provisioning process and never store plain secrets in git.
DEFAULT_ADMIN_CLIENT_ID=example-admin-client-id
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_SECRET=replace-with-hashed-secret   # store hashed secret in DB
DEFAULT_ADMIN_SALT=replace-with-random-salt

# -----------------------
# Object storage (MinIO / S3)
# -----------------------
# Use the MinIO service host or an S3-compatible endpoint. Keep keys secret.
STORAGE_ENDPOINT=minio:9000
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin
STRORAGE_SSL=false           # true if using TLS
BUCKET_NAME=crypsis-files
HASH_METHOD=SHA-256          # checksum algorithm used for files
ENC_METHOD=AES-256-GCM       # encryption algorithm
HASH_ENCRYPTED_FILE=true

# -----------------------
# Master key / KMS configuration
# -----------------------
# MKEY_PATH: Local path (inside the container) to a master key file. When
# running with docker-compose, mount the file into the container and point
# MKEY_PATH to the mount location (e.g. /sample.key or /app/resources/master.key).
# Example uses a relative path that you should adapt for your environment.
MKEY_PATH=./resources/sample.key

# Use an external KMS (e.g. Cosmian) for key material. Set KMS_ENABLE=true to
# enable KMS integration and provide the KMS URL and certificate/key paths.
KMS_ENABLE=false
KMS_KEY_UID=ec8af3e6-48f2-4650-8bdf-cea269acbb30
KMS_URL=https://localhost:9998
KEY_PATH=./cosmian/kms.key
CERT_PATH=./cosmian/kms.crt
CA_PATH=./cosmian/kms.crt

# -----------------------
# OpenTelemetry / Observability
# -----------------------
# Enable telemetry and configure the OTLP collector endpoint used by the app.
OTEL_ENABLE=true
OTEL_ENDPOINT=otel-collector:4318

# -----------------------
# Server / runtime flags
# -----------------------
PORT=8080
GIN_MODE=debug                # debug | release
DEVELOPER_HOST=true           # set to false in production

# -----------------------
# Notes
# -----------------------
# - Replace placeholder values with secure credentials before deploying.
# - Consider using a secrets manager (Vault, AWS Secrets Manager, etc.) in
#   production rather than storing secrets in env files.
# - Paths above are examples for local development; inside containers you may
#   need to mount files and update MKEY_PATH/KEY_PATH/CERT_PATH accordingly.
# - Copy this file to ".env" to run locally: cp .env.example .env
